<!-- Jack Reyburn -->
<!-- handles the my cube feature and comments menus -->
<div *ngIf="message">
    <!-- second accordian menu handling features -->
    <mat-accordion class="message-data" style="background-color: rgba(255,255,255,.7); display: block; position: absolute; bottom: 0px; right: 0px">
        <mat-expansion-panel [expanded]="open === true">
            <mat-expansion-panel-header>
                <!-- header -->
                <mat-panel-title>
                    Feature Data
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div [innerHTML]="message" style="height: 260px; overflow: auto">
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<div *ngIf="myCubeData">
    Mycube Data
    <!-- first accordian menu for added comments -->
    <mat-accordion class="comment-data" style="width: 400px; background-color: rgba(255,255,255,.7); display: block; position: absolute; bottom: 0px; right: 384px">
        <mat-expansion-panel>
            <mat-expansion-panel-header>
                <!-- header -->
                <mat-panel-title>
                    Comments ({{myCubeComments.length}})
                </mat-panel-title>
            </mat-expansion-panel-header>

            <!-- box for comments -->
            <div *ngFor="let myCubeComment of myCubeComments" style="position:relative">
                <span>
                    <!-- name and date -->
                    <b>{{myCubeComment.firstName}} {{myCubeComment.lastName}}</b>
                    <i>{{myCubeComment.createdat | date:'MMM dd':'-0500'}} at {{myCubeComment.createdat | date:'h:ma':'-0500'}}</i>

                    <!-- delete button -->
                    <button id="trashButton" *ngIf="userID == myCubeComment.userid" mat-button (click)='deleteMyCubeComment(myCubeConfig.table, myCubeComment.id)'>
                        <mat-icon>delete</mat-icon>
                    </button>
                    <br>
                    <!-- comment -->
                    <div style="word-wrap:normal; width:380px">
                        {{myCubeComment.comment}}
                    </div>
                    <br>
                    <input type="file" (change)="onFileSelected($event)">
                    <hr>
                </span>
            </div>
            <!-- comment input that is used as enter is pressed -->
            <mat-form-field style="width:100%">
                <input matInput id="comment" [(ngModel)]="newComment" placeholder="New Comment" (keyup.enter)="addMyCubeComment()">
            </mat-form-field>
        </mat-expansion-panel>
    </mat-accordion>

    <!-- second accordian menu handling features -->
    <mat-accordion class="feature-data" style="background-color: rgba(255,255,255,.7); display: block; position: absolute; bottom: 0px; right: 0px">
        <mat-expansion-panel [expanded]="open === true">
            <mat-expansion-panel-header>
                <!-- header -->
                <mat-panel-title>
                    Feature Data
                </mat-panel-title>
            </mat-expansion-panel-header>
            <div style="height: 260px; overflow: auto">
                <div *ngFor="let myCube of myCubeData">
                    <div *ngIf="myCube.type=='id'"></div>
                    <div *ngIf="myCube.type=='geom'"></div>
                    <div *ngIf="myCube.type=='integer'">
                        <!-- input field -->
                        <mat-form-field style="width:90%">
                            <input matInput [disabled]="!myCubeConfig.edit" id="textinput" ngModel required placeholder="{{myCube.field}}" [(ngModel)]="myCube.value"
                                (blur)="updateMyCube(myCube)">
                        </mat-form-field>
                    </div>
                    <div *ngIf="myCube.type=='double precision'">
                        <!-- input field -->
                        <mat-form-field style="width:90%">
                            <input matInput [disabled]="!myCubeConfig.edit" id="textinput" ngModel required placeholder="{{myCube.field}}" [(ngModel)]="myCube.value"
                                (blur)="updateMyCube(myCube)">
                        </mat-form-field>
                    </div>
                    <div *ngIf="myCube.type=='boolean'">
                        <!-- checkbox for contracting -->
                        <mat-checkbox [disabled]="!myCubeConfig.edit" [(ngModel)]="myCube.value" (change)="updateMyCube(myCube)">{{myCube.field}}</mat-checkbox>
                    </div>
                    <div *ngIf="myCube.type=='text'" matTooltip="No crazy symbols yet" matTooltipPosition="above" matTooltipShowDelay="1000">
                        <mat-form-field style="width:90%">
                            <input matInput [disabled]="!myCubeConfig.edit" id="textinput" ngModel required placeholder="{{myCube.field}}" [(ngModel)]="myCube.value"
                                (blur)="updateMyCube(myCube)">
                        </mat-form-field>
                    </div>
                    <div *ngIf="myCube.type=='date'">
                        <mat-form-field style="width:90%">
                            <input matInput [disabled]="!myCubeConfig.edit" [matDatepicker]="picker" placeholder="{{myCube.field}}" [(ngModel)]="myCube.value"
                                (dateChange)="updateMyCube(myCube)">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                        </mat-form-field>
                    </div>
                </div>
            </div>
        </mat-expansion-panel>
    </mat-accordion>
</div>
<br>
<div #mapElement id="mapid"></div>

<div class="container-fluid pull-right" style="background: rgba(255,255,255,.7)">
   
    <div>
       <mat-accordion class="example-headers-align">
            <mat-expansion-panel >
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Pages
                    </mat-panel-title>
                    <mat-panel-description>
                        {{currPage}}
                    </mat-panel-description>
                </mat-expansion-panel-header>
                <table *ngFor="let userPage of mapConfig.userpages" style="position:relative; width:100%; right:4px" data-toggle="buttons">
                        <tr><td><button mat-button (click)="setPage(userPage)" style="margin-right:3px; margin-bottom:3px;" class="btn btn-secondary pull-left">{{userPage.page}}</button> <!--(click)="setUserPageLayers(activePage)", {{activePage.page}}-->
                            </td><td style="position:relative; left:4px"><button mat-icon-button [matMenuTriggerFor]="menu">
                                <mat-icon>more_vert</mat-icon>
                              </button>
                              <mat-menu #menu="matMenu">
                                <button mat-menu-item>
                                  <mat-icon>done</mat-icon>
                                  <span>Make Default</span>
                                </button>
                                <button mat-menu-item (click)="openPageConfig(userPage.ID, userPage.userID, userPage.page)">
                                  <mat-icon>settings</mat-icon>
                                  <span>Edit Layers</span>
                                </button>
                                <button mat-menu-item>
                                  <mat-icon>notifications_off</mat-icon>
                                  <span>Disable alerts</span>
                                </button>
                              </mat-menu>
                            </td></tr>
                </table>
            </mat-expansion-panel>
            <mat-expansion-panel>
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Layers
                    </mat-panel-title>
                    <mat-panel-description>
                        {{mapConfig.currLayerName}}
                    </mat-panel-description>
                </mat-expansion-panel-header>
                <mat-radio-group class="example-radio-group" [(ngModel)]="currLayer">
                        <div *ngFor="let userpagelayer of mapConfig.userpagelayers; let i = index" [attr.data-index]="i"> <!--let activeUPL of UPLs?-->
                                <button mat-icon-button [matMenuTriggerFor]="menu">
                                        <mat-icon>more_vert</mat-icon>
                                      </button>
                                      <mat-menu #menu="matMenu">
                                        <button mat-menu-item>
                                          <mat-icon>star</mat-icon>
                                          <span>Default On</span>
                                        </button>
                                        <button mat-menu-item>
                                          <mat-icon>opacity</mat-icon>
                                          <span>Opacity</span>
                                        </button>
                                        <button mat-menu-item>
                                            <mat-icon>share</mat-icon>
                                            <span>Share</span>
                                          </button>
                                          <button mat-menu-item>
                                                <mat-icon>remove</mat-icon>
                                                <span>Remove From Page</span>
                                              </button>
                                          <button mat-menu-item>
                                            <mat-icon>web</mat-icon>
                                            <span>Copy Google Sheet Link</span>
                                          </button>
                                          <button mat-menu-item>
                                            <mat-icon>place</mat-icon>
                                            <span>View in Google Earth</span>
                                          </button>
                                          <button mat-menu-item>
                                                <mat-icon>assignment</mat-icon>
                                                <span>View Metadata</span>
                                              </button>                                              
                                      </mat-menu>
                        <mat-radio-button [disabled]="!userpagelayer.layerShown" class="example-radio-button" [value]="userpagelayer" (change)="mapService.setCurrentLayer(userpagelayer, mapConfig)">
                            <mat-slide-toggle class="example-margin" [checked]="userpagelayer.layerShown" (change)="mapService.toggleLayers(userpagelayer.loadOrder,mapConfig,i)">
                                {{userpagelayer.layer_admin.layerName}}<br>
                            </mat-slide-toggle>
                        </mat-radio-button>
                        </div>
                    </mat-radio-group><hr>
                   
                    <mat-chip-list *ngIf="mapConfig.editmode">
                        <mat-chip (click)="mapService.draw(mapConfig,'Point')"><mat-icon>control_point</mat-icon></mat-chip>
                        <mat-chip (click)="mapService.draw(mapConfig,'LineString')"><mat-icon>timeline</mat-icon></mat-chip>
                        <mat-chip (click)="mapService.draw(mapConfig,'Polygon')"><mat-icon>change_history</mat-icon></mat-chip>
                        <mat-chip (click)="mapService.delete(mapConfig)"><mat-icon>delete</mat-icon></mat-chip>
                    </mat-chip-list>
            </mat-expansion-panel>
            <mat-expansion-panel [disabled]="true">
                <mat-expansion-panel-header>
                    <mat-panel-title>
                        Modules
                    </mat-panel-title>
                    <mat-panel-description>
                        Current Module
                    </mat-panel-description>
                </mat-expansion-panel-header>
                Modules
            </mat-expansion-panel>
        </mat-accordion>
    </div>
   <div id="info"></div>
</div>
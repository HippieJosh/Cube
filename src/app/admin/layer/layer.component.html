<div class="layer-parent-container">
    <div class="row">
        <mat-table id="layerDataTable" #table [dataSource]="dataSource">
            <ng-container matColumnDef="layerID">
                <mat-header-cell class="layer-sm-head" *matHeaderCellDef> ID </mat-header-cell>
                <mat-cell class="layer-sm-cell" *matCellDef="let row">
                    <b>{{row.currentData.ID}}</b>
                    <!-- <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['ID']" [readonly]="!row.editing" [(ngModel)]="row.currentData.ID">
                    </mat-form-field> -->
                </mat-cell>
            </ng-container>
            
            <ng-container matColumnDef="name">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Name </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field #input floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerName']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerName">
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <!-- <ng-container matColumnDef="identity">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Identity </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field #input floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerIdent']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerIdent">
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->
            
            <!-- <ng-container matColumnDef="service">
                <mat-header-cell class="layer-sm-head" *matHeaderCellDef> Service </mat-header-cell>
                <mat-cell class="layer-sm-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerService']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerService">
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->
            
            <!-- <ng-container matColumnDef="server">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Server </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <mat-select [formControl]="row.validator.controls['serverID']" [(ngModel)]="row.currentData.serverID">
                            <mat-option *ngFor="let server of servers" [value]="server.ID">
                                {{server.serverName}}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->

            <ng-container matColumnDef="description">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Description </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerDescription']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerDescription">
                    </mat-form-field>
                </mat-cell>
            </ng-container>
            
            <!-- <ng-container matColumnDef="format">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Format </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerFormat']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerFormat">
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->
            
            <ng-container matColumnDef="type">
                <mat-header-cell class="layer-md-head" *matHeaderCellDef> Type </mat-header-cell>
                <mat-cell class="layer-md-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerType']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerType">
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <!-- <ng-container matColumnDef="geometry">
                <mat-header-cell class="layer-sm-head" *matHeaderCellDef> Geometry </mat-header-cell>
                <mat-cell class="layer-sm-cell" *matCellDef="let row">
                    <mat-form-field floatPlaceholder="{{ row.editing ? 'float' : 'never' }}">
                        <input matInput [formControl]="row.validator.controls['layerGeom']" [readonly]="!row.editing" [(ngModel)]="row.currentData.layerGeom">
                    </mat-form-field>
                </mat-cell>
            </ng-container> -->

            <ng-container matColumnDef="actionsColumn">
                <mat-header-cell class="layer-lg-head" *matHeaderCellDef>
                    <button mat-button id="createLayerBtn" (click)="createLayer()">Create Layer</button>
                    <button mat-button id="createMyCubeBtn" (click)="createMyCube()">Create MyCube</button>
                </mat-header-cell>
                <mat-cell class="layer-lg-cell" *matCellDef="let row">
                    <button mat-icon-button color="primary" focusable="false" (click)="openDetails(row.currentData.ID, row.currentData.layerName)">
                        <i class="fa fa-pencil mat-icon"></i>
                    </button>
                    <!-- <button *ngIf="row.editing" mat-icon-button color="primary" focusable="false" (click)="row.confirmEditCreate()">
                        <i class="fa fa-check mat-icon"></i>
                    </button> -->
                    <button mat-icon-button color="primary" focusable="false" (click)="confirmDelete(row.currentData)">
                        <i class="fa fa-times mat-icon"></i>
                    </button>
                    <button mat-button [matMenuTriggerFor]="menu2">
                        Options
                    </button>
                    <mat-menu #menu2="matMenu" [overlapTrigger]="false">
                        <button mat-menu-item id="exlayerperm" (click)="openPermission(row.currentData.ID, row.currentData.layerName)">Permissions</button>
                        <button mat-menu-item id="openstyle" (click)="openStyle(row.currentData.ID, row.currentData.layerName)">Style</button>
                    </mat-menu>
                    <!-- <button mat-button id="exlayerdetails" (click)="openDetails(row.currentData.ID, row.currentData.layerName)">Details</button> -->
                </mat-cell>
            </ng-container>
            
            <mat-header-row *matHeaderRowDef="layerColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: layerColumns"></mat-row>
        </mat-table>
    </div>


    
    <!-- <span ngbDropdown>   
        <button id="sortBtn" type="button" class="btn-primary" ngbDropdownToggle>Sort Layers</button>
        <div id="sortDrop" class="dropdown-menu dropdown-menu-right" aria-labelledby="options">
            <button id="sortAZ" type="button" class="btn btn-secondary" (click)="sortLayers('AZ')">Name (Ascending)</button>
            <button id="sortZA" type="button" class="btn btn-secondary" (click)="sortLayers('ZA')">Name (Descending)</button>
            <button id="sortType" type="button" class="btn btn-secondary" (click)="sortLayers('TYPE')">Type</button>
            <button id="sortOldNew" type="button" class="btn btn-secondary" (click)="sortLayers('OLD_NEW')">Old to New</button><br>
            <button id="sortNewOld" type="button" class="btn btn-secondary" (click)="sortLayers('NEW_OLD')">New to Old</button><br>
            <button id="sortGeom" type="button" class="btn btn-secondary" (click)="sortLayers('GEOM')">Geometry</button>
        </div>
    </span> -->
</div>